# Maintainer: Ash Logan <ash [at] heyquark [dot] com>

pkgname=wiiu-sdl2
pkgver=2.0.8
_gittag=09fa5e9
pkgrel=5
pkgdesc="Library for portable access to Wii U video, audio, input"
url="https://github.com/yawut/SDL"
license=("custom")
arch=("any")
depends=("devkitPPC" "wut" "ppc-libjpeg-turbo" "ppc-mpg123" "ppc-libogg" "ppc-libvorbisidec" "ppc-libpng" "ppc-freetype")
makedepends=("git" "cmake")
groups=("wiiu-libs")
source=("$pkgname::git+https://github.com/yawut/SDL#tag=$_gittag")
md5sums=("SKIP")
options=("!buildflags" "!strip" "staticlibs")
install=sdl2-legacy.install

_prefix="/opt/devkitpro/portlibs/wiiu"

prepare() {
    cd $pkgname
    mkdir -p build
    cd build
    cmake .. \
        -DCMAKE_TOOLCHAIN_FILE=$WUT_ROOT/share/wut.toolchain.cmake \
        -DCMAKE_INSTALL_PREFIX=$_prefix
}

build() {
    cd $pkgname/build
    make
}

package() {
    cd $pkgname/build
    make install DESTDIR=$pkgdir
}
